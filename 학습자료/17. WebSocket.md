## WebSoket ?

**WebSocket**μ€ TCP μ†μΌ“ μ—°κ²°μ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μ–‘λ°©ν–¥ ν†µμ‹ μ„ κ°€λ¥ν•κ² ν•©λ‹λ‹¤. μΌλ°μ μΈ HTTP ν†µμ‹ μ—μ„λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­μ„ λ³΄λ‚΄κ³  μ„λ²„κ°€ μ‘λ‹µμ„ λ°ν™ν•λ” λ°©μ‹μΌλ΅ λ™μ‘ν•©λ‹λ‹¤. λ°λ©΄ WebSocketμ€ ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°μ„ μ΄κΈ°ν™”ν• ν›„ μ§€μ†μ μΌλ΅ μ—΄λ¦° μ—°κ²°μ„ μ μ§€ν•λ©° μ–‘μΈ΅μ΄ λ°μ΄ν„°λ¥Ό μμ λ΅­κ² λ³΄λ‚Ό μ μμµλ‹λ‹¤.

μµμ‹  λΈλΌμ°μ €λ” λ€λ¶€λ¶„ μ›Ή μ†μΌ“μ„ μ§€μ›ν•λ©°, λ…Έλ“λ” `ws`λ‚ `Socket.IO` κ°™μ€ ν¨ν‚¤μ§€λ¥Ό ν†µν•΄ μ›Ή μ†μΌ“ μ‚¬μ© κ°€λ¥ν•©λ‹λ‹¤.

<br/>

## WebSokectμ λ™μ‘μ›λ¦¬
<div align="center">
  <img src="https://velog.velcdn.com/images/njt6419/post/692637c0-64e1-4653-8194-94c78ae34c0a/image.png" width="800"/>
</div>

### 1 ) μ—°κ²° μ΄κΈ°ν™” (Handshake)

**WebSocket** ν†µμ‹ μ€ μ²μμ— HTTP μ”μ²­μ„ ν†µν•΄ μ‹μ‘λ©λ‹λ‹¤. μ΄ κ³Όμ •μ€ "**ν•Έλ“μ…°μ΄ν¬**"λΌκ³  λ¶λ¦½λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— WebSocket μ—°κ²°μ„ μ”μ²­ν•λ”λ°, μ΄ κ³Όμ •μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

**ν΄λΌμ΄μ–ΈνΈμ μ—…κ·Έλ μ΄λ“ μ”μ²­**

- ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— `Upgrade` ν—¤λ”κ°€ ν¬ν•¨λ νΉλ³„ν• HTTP GET μ”μ²­μ„ λ³΄λƒ…λ‹λ‹¤.
- μ΄ μ”μ²­μ—λ” WebSocketμΌλ΅ μ—…κ·Έλ μ΄λ“ν•κ² λ‹¤λ” μλ„κ°€ ν¬ν•¨λμ–΄ μμΌλ©°, ν—¤λ”μ— `Connection: Upgrade`, `Upgrade: websocket` λ“±μ΄ λ…μ‹λ©λ‹λ‹¤.

```
GET /chat HTTP/1.1
Host: example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==
Sec-WebSocket-Version: 13
```

<br/>

**μ„λ²„μ μ‘λ‹µ**

- μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ λ°›μ•„λ“¤μ΄λ©΄ μ‘λ‹µμΌλ΅ `101 Switching Protocols`λΌλ” μƒνƒ μ½”λ“μ™€ ν•¨κ» WebSocket μ—°κ²°μ„ μΉμΈν•©λ‹λ‹¤.
- λν•, ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ `Sec-WebSocket-Key`λ¥Ό κΈ°λ°μΌλ΅ μƒλ΅μ΄ κ°’μ„ κ³„μ‚°ν•΄ `Sec-WebSocket-Accept` ν—¤λ”λ΅ λ°ν™ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ μ‘λ‹µμ΄ μ ν¨ν•μ§€ ν™•μΈν•  μ μμµλ‹λ‹¤.

```
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=
```

<br/>

### 2 ) μ—°κ²° ν™•λ¦½ ν›„ ν†µμ‹ 

**ν•Έλ“μ…°μ΄ν¬**κ°€ μ™„λ£λλ©΄ WebSocket μ—°κ²°μ΄ ν™•λ¦½λλ©°, μ΄ μ‹μ λ¶€ν„°λ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ κΈ°μ΅΄μ HTTP μ”μ²­/μ‘λ‹µ μ‚¬μ΄ν΄μ„ λ²—μ–΄λ‚ μ–‘λ°©ν–¥μΌλ΅ λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›μ„ μ μκ² λ©λ‹λ‹¤.

**μ§€μ†μ μΈ μ—°κ²°**

- HTTP μ—°κ²°μ€ μΌλ°μ μΌλ΅ μ”μ²­μ„ μ™„λ£ν• ν›„ λ‹«νμ§€λ§**, WebSocketμ€ μ§€μ†μ μΌλ΅ μ—΄λ¦° μƒνƒλ΅ μ μ§€**λ©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ μ„λ²„λ‚ ν΄λΌμ΄μ–ΈνΈκ°€ λ°μ΄ν„°λ¥Ό λ³΄λ‚Ό μ¤€λΉ„κ°€ λ  λ•λ§λ‹¤ μ–Έμ λ“ μ§€ μ£Όκ³ λ°›μ„ μ μμµλ‹λ‹¤.

**ν”„λ μ„ κΈ°λ° ν†µμ‹ **

- WebSocketμ€ λ°μ΄ν„°λ¥Ό μ‘μ€ ν”„λ μ„ λ‹¨μ„λ΅ μ „μ†΅ν•©λ‹λ‹¤. μ΄ ν”„λ μ„μ€ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ κ°„μ— μ„λ΅ μμ λ΅­κ² μ „λ‹¬λ  μ μμΌλ©°, ν…μ¤νΈλ‚ λ°”μ΄λ„λ¦¬ λ°μ΄ν„°λ¥Ό ν¬ν•¨ν•  μ μμµλ‹λ‹¤.
- μ΄λ¬ν• ν”„λ μ„μ—λ” λ°μ΄ν„° μ ν•, κΈΈμ΄ μ •λ³΄, μΆ…λ£ μ—¬λ¶€ λ“±μ λ©”νƒ€λ°μ΄ν„°κ°€ ν¬ν•¨λμ–΄ μμ–΄ ν¨μ¨μ μΌλ΅ λ°μ΄ν„°λ¥Ό κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.

**μ–‘λ°©ν–¥ ν†µμ‹ **

- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ λ¨λ‘ κ°™μ€ μ—°κ²°μ„ μ‚¬μ©ν•΄ μ–Έμ λ“ μ§€ λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•  μ μμµλ‹λ‹¤.
- μλ¥Ό λ“¤μ–΄, μ±„ν… μ• ν”λ¦¬μΌ€μ΄μ…μ κ²½μ° ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄λ©΄ μ„λ²„λ” μ¦‰μ‹ λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈμ—κ² ν•΄λ‹Ή λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•  μ μμµλ‹λ‹¤.

<br/>

### 3 ) λ°μ΄ν„° μ „μ†΅ κµ¬μ΅°

WebSocketμ€ λ‘ κ°€μ§€ μ£Όμ” λ°μ΄ν„° μ ν•μΈ **ν…μ¤νΈ λ©”μ‹μ§€**μ™€ **λ°”μ΄λ„λ¦¬ λ©”μ‹μ§€**λ¥Ό μ§€μ›ν•©λ‹λ‹¤. λ°μ΄ν„°λ” ν”„λ μ„μ΄λΌλ” μ‘μ€ μ΅°κ°μΌλ΅ λ‚λ‰μ–΄ μ „μ†΅λλ©°, λ‹¤μκ³Ό κ°™μ€ κµ¬μ΅°λ΅ μ „μ†΅λ©λ‹λ‹¤.

- **ν”„λ μ„ ν—¤λ”**: κ° ν”„λ μ„μ—λ” λ°μ΄ν„° μ ν•(ν…μ¤νΈ λλ” λ°”μ΄λ„λ¦¬), ν”„λ μ„μ μΆ…λ£ μ—¬λ¶€ λ“±μ„ ν¬ν•¨ν•λ” ν—¤λ”κ°€ μμµλ‹λ‹¤.
- **νμ΄λ΅λ“**: ν”„λ μ„μ λ‚λ¨Έμ§€λ” μ‹¤μ  λ°μ΄ν„° νμ΄λ΅λ“λ΅ κµ¬μ„±λ©λ‹λ‹¤. μ΄ νμ΄λ΅λ“λ” μ „λ‹¬ν•λ ¤λ” λ©”μ‹μ§€μ μ‹¤μ  λ‚΄μ©μ…λ‹λ‹¤.

<br/>

### 4 ) μ—°κ²° μΆ…λ£

WebSocket μ—°κ²°μ€ ν΄λΌμ΄μ–ΈνΈλ‚ μ„λ²„κ°€ μ–Έμ λ“ μ§€ μΆ…λ£ν•  μ μμµλ‹λ‹¤. μΆ…λ£ κ³Όμ •μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

- **μΆ…λ£ ν”„λ μ„ μ „μ†΅**: μ—°κ²°μ„ μΆ…λ£ν•κ³ μ ν•λ” μ½(ν΄λΌμ΄μ–ΈνΈλ‚ μ„λ²„)μ€ "μΆ…λ£ ν”„λ μ„"μ„ μ „μ†΅ν•μ—¬ μƒλ€μ—κ² μ—°κ²°μ„ λ‹«κ² λ‹¤κ³  μ•λ¦½λ‹λ‹¤.
- **ν™•μΈ λ° μΆ…λ£**: μƒλ€λ°©μ€ μ΄λ¥Ό ν™•μΈν•κ³  μ—°κ²°μ„ λ‹«μµλ‹λ‹¤. μ΄ν›„ λ¨λ“  λ°μ΄ν„° μ „μ†΅μ΄ μ¤‘λ‹¨λκ³ , μ—°κ²°μ΄ ν•΄μ λ©λ‹λ‹¤.

<br/>

## HTTPμ™€ WebSocket μ°¨μ΄μ 
![](https://velog.velcdn.com/images/njt6419/post/f18c5a39-b0ed-4dd5-a874-6e4180df3264/image.jpg)

### 1 ) ν†µμ‹ λ°©μ‹

**HTTP**

- HTTPλ” **μ”μ²­-μ‘λ‹µ(Request-Response)** λ°©μ‹μ…λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈ(μ›Ή λΈλΌμ°μ €)κ°€ μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚΄λ©΄ μ„λ²„λ” κ·Έμ— λ€ν• μ‘λ‹µμ„ λ°ν™ν•©λ‹λ‹¤.
- ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ”ν• μ •λ³΄κ°€ μμ„ λ•λ§λ‹¤ μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚΄κ³  μ„λ²„λ” ν• λ² μ‘λ‹µν• ν›„ μ—°κ²°μ„ μΆ…λ£ν•©λ‹λ‹¤.
- μ΄λ¬ν• λ°©μ‹ λ•λ¬Έμ— ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ μƒνƒ λ³€ν™”λ‚ μ‹¤μ‹κ°„ μ •λ³΄ μμ‹ μ„ μ„ν•΄ μ£ΌκΈ°μ μΌλ΅ μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚΄λ” "**ν΄λ§(Polling)**"μ„ μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤.

π’΅ **Polling**

μ›Ήμ†μΌ“ λ“±μ¥ μ΄μ „μ— μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ μ„λ²„μ™€ μ‹¤μ‹κ°„μΌλ΅ λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›κΈ° μ„ν•΄ μ£Όλ΅ μ‚¬μ©ν•λ λ°©μ‹ μ¤‘ ν•λ‚λ΅ HTTPμ κ°€μ¥ ν° νΉμ§•μ΄μ λ‹¨μ μ΄ λ  μ μλ” λ‹¨λ°©ν–¥ ν†µμ‹ μ„ ν•΄κ²°ν•κΈ° μ„ν•΄ HTTP ν”„λ΅ν† μ½μ„ ν™μ©ν•΄ μ–µμ§€λ΅Β **μ–‘λ°©ν–¥**Β ν†µμ‹ μ„ κµ¬ν„ν• κ²ƒμ…λ‹λ‹¤. μ΄ λ°©μ‹μ€ ν΄λΌμ΄μ–ΈνΈ(λΈλΌμ°μ €)κ°€ μΌμ •ν• μ‹κ°„ κ°„κ²©μΌλ΅ μ„λ²„μ— λ°μ΄ν„°λ¥Ό μ”μ²­ν•μ—¬ μ„λ²„μ μƒνƒλ‚ μ—…λ°μ΄νΈλ μ •λ³΄λ¥Ό ν™•μΈν•λ” λ°©μ‹μ…λ‹λ‹¤.

**WebSocket**

- WebSocketμ€ **μ–‘λ°©ν–¥ ν†µμ‹ (Bi-directional)** μ„ μ§€μ›ν•λ” ν”„λ΅ν† μ½μ…λ‹λ‹¤. μ¦‰, ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ„λ΅ λ°μ΄ν„° μ „μ†΅μ„ μμ λ΅­κ² ν•  μ μμµλ‹λ‹¤.
- ν• λ² μ—°κ²°μ΄ μ„¤μ •λλ©΄ μ—°κ²°μ΄ μ—΄λ¦° μƒνƒλ΅ μ μ§€λλ©°, μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μƒνΈμ‘μ©μ„ ν•  λ•λ§λ‹¤ λ³„λ„μ μ”μ²­μ„ μƒλ΅ λ³΄λ‚΄μ§€ μ•μ•„λ„ λ©λ‹λ‹¤.
- μ΄λ¥Ό ν†µν•΄ μ‹¤μ‹κ°„ μ†ν†µμ΄ ν•„μ”ν• μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ λ§¤μ° ν¨μ¨μ μ…λ‹λ‹¤.

<br/>

### 2 ) μ—°κ²° λ°©μ‹

**HTTP**

- HTTPλ” **λΉ„μ—°κ²°ν•(Stateless)** ν”„λ΅ν† μ½λ΅, κ° μ”μ²­μ€ λ…λ¦½μ μΌλ΅ μ΄λ£¨μ–΄μ§‘λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μ”μ²­μ„ λ³΄λ‚Ό λ•λ§λ‹¤ μ„λ²„μ™€ μƒλ΅μ΄ μ—°κ²°μ„ μ„¤μ •ν•©λ‹λ‹¤.
- λ¨λ“  μ”μ²­λ§λ‹¤ TCP μ—°κ²°μ„ μ„¤μ •ν•κ³  μ‘λ‹µ ν›„ μ—°κ²°μ„ λκΈ° λ•λ¬Έμ— μ—°κ²° μ¤λ²„ν—¤λ“κ°€ μμµλ‹λ‹¤.

**WebSocket**

- WebSocketμ€ **μ—°κ²°ν•(Connection-oriented)** ν”„λ΅ν† μ½μ…λ‹λ‹¤. μ—°κ²° μ΄κΈ°ν™” λ‹¨κ³„μ—μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” **HTTP ν•Έλ“μ…°μ΄ν¬(Handshake)** κ³Όμ •μ„ ν†µν•΄ μ—°κ²°μ„ μ—…κ·Έλ μ΄λ“ν•κ³ , μ΄ν›„μ—λ” μ§€μ†μ μΈ TCP μ—°κ²°μ„ μ μ§€ν•©λ‹λ‹¤.
- μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ κ°„μ— μ—°κ²°μ΄ μ μ§€λκΈ° λ•λ¬Έμ— μ–Έμ λ“  λ°μ΄ν„°λ¥Ό λ³΄λ‚Ό μ μμµλ‹λ‹¤.

<br/>

### 3 ) ν†µμ‹  λ°©ν–¥

**HTTP**

- **λ‹¨λ°©ν–¥ ν†µμ‹ **: ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­μ„ λ³΄λ‚΄λ©΄ μ„λ²„κ°€ μ‘λ‹µν•λ” ν•νƒμ…λ‹λ‹¤. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ΄ μ—†λ” ν• ν΄λΌμ΄μ–ΈνΈμ—κ² μ •λ³΄λ¥Ό λ³΄λ‚Ό μ μ—†μµλ‹λ‹¤.
- μ΄λ¥Ό κ·Ήλ³µν•κΈ° μ„ν•΄ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ—κ² λ°μ΄ν„°λ¥Ό ν‘Έμ‹ν•λ” λ°©λ²•μΌλ΅λ” **λ΅± ν΄λ§(Long Polling)**, **μ„λ²„ μ„ΌνΈ μ΄λ²¤νΈ(Server-Sent Events, SSE)** λ“±μ„ μ‚¬μ©ν•©λ‹λ‹¤. κ·Έλ¬λ‚ μ΄λ¬ν• λ°©λ²•λ“¤μ€ μΌμ •ν• ν•κ³„μ™€ μ¤λ²„ν—¤λ“κ°€ μ΅΄μ¬ν•©λ‹λ‹¤.

**WebSocket**

- **μ–‘λ°©ν–¥ ν†µμ‹ **: ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ λ¨λ‘ μμ λ΅­κ² λ©”μ‹μ§€λ¥Ό λ³΄λ‚Ό μ μμµλ‹λ‹¤. μ„λ²„κ°€ μƒνƒ λ³€ν™”κ°€ λ°μƒν–μ„ λ• ν΄λΌμ΄μ–ΈνΈμ—κ² μ¦‰μ‹ μ•λ¦΄ μ μκΈ° λ•λ¬Έμ— μ‹¤μ‹κ°„ ν†µμ‹ μ΄ κ°€λ¥ν•©λ‹λ‹¤.

<br/>

### 4 ) μ‹κ°„μ„±κ³Ό ν¨μ¨μ„±

**HTTP**

- HTTPλ” μ‹¤μ‹κ°„ ν†µμ‹ μ„ μ„ν•΄ ν΄λΌμ΄μ–ΈνΈκ°€ μ£ΌκΈ°μ μΌλ΅ μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚΄λ” ν΄λ§ λ°©μ‹μ„ μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤. ν•μ§€λ§ μ΄ λ°©μ‹μ€ λ€μ—­ν­μ„ μ†λ¨ν•κ³  μ„λ²„μ— λ¶€λ‹΄μ„ μ¤„ μ μμµλ‹λ‹¤.
- ν΄λΌμ΄μ–ΈνΈκ°€ ν•„μ”ν•μ§€ μ•μ€ μ •λ³΄λΌλ„ μ§€μ†μ μΌλ΅ μ”μ²­ν•΄μ•Ό ν•λ” λΉ„ν¨μ¨μ μΈ μΈ΅λ©΄μ΄ μμµλ‹λ‹¤.

**WebSocket**

- WebSocketμ€ ν• λ² μ—°κ²°μ„ λ§Ίμ€ ν›„ λ°μ΄ν„°λ¥Ό μ–‘λ°©ν–¥μΌλ΅ μμ λ΅­κ² μ£Όκ³ λ°›κΈ° λ•λ¬Έμ— μ‹¤μ‹κ°„μ„±κ³Ό ν¨μ¨μ„±μ΄ λ›°μ–΄λ‚©λ‹λ‹¤.
- μ—°κ²°μ΄ μ μ§€λλ―€λ΅ ν•„μ”ν•  λ•λ§ λ°μ΄ν„°κ°€ μ¤κ°€λ©°, λ¶ν•„μ”ν• μ—°κ²° μ„¤μ •κ³Ό ν•΄μ  κ³Όμ •μ΄ μ—†μ–΄ λ„¤νΈμ›ν¬ μμ›μ„ μ μ•½ν•  μ μμµλ‹λ‹¤.

<br/>

### 5 ) λ°μ΄ν„° μ „μ†΅ κµ¬μ΅°

**HTTP**

- HTTPλ” μ”μ²­κ³Ό μ‘λ‹µλ§λ‹¤ ν—¤λ”κ°€ ν¬ν•¨λμ–΄ μ „μ†΅λ©λ‹λ‹¤. κ° μ”μ²­λ§λ‹¤ μƒλ‹Ήν• μ–‘μ ν—¤λ” λ°μ΄ν„°κ°€ μ¶”κ°€λλ―€λ΅ μ¤λ²„ν—¤λ“κ°€ μ¦κ°€ν•©λ‹λ‹¤.
- μ£Όλ΅ HTML, JSON, ν…μ¤νΈ λ°μ΄ν„° λ“±μ„ μ „μ†΅ν•λ©°, λ‹¤λ‰μ λ°”μ΄λ„λ¦¬ λ°μ΄ν„° μ „μ†΅μ—λ” μƒλ€μ μΌλ΅ μ ν•©ν•μ§€ μ•μµλ‹λ‹¤.

**WebSocket**

- WebSocketμ€ μ΄κΈ° ν•Έλ“μ…°μ΄ν¬ μ΄ν›„μ—λ” **ν”„λ μ„ λ‹¨μ„**λ΅ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ©°, ν—¤λ” μ¤λ²„ν—¤λ“κ°€ μ μµλ‹λ‹¤.
- **ν…μ¤νΈ λ°μ΄ν„°**μ™€ **λ°”μ΄λ„λ¦¬ λ°μ΄ν„°** λ¨λ‘ ν¨μ¨μ μΌλ΅ μ „μ†΅ν•  μ μμµλ‹λ‹¤.

<br/>

| **νΉμ„±** | HTTP | WebSocket |
| --- | --- | --- |
| **ν†µμ‹  λ°©μ‹** | μ”μ²­-μ‘λ‹µ | μ–‘λ°©ν–¥ ν†µμ‹  |
| **μ—°κ²° μ μ§€** | λΉ„μ—°κ²°ν•, μ”μ²­ μ‹λ§λ‹¤ μƒ μ—°κ²° | μ§€μ†μ  μ—°κ²° |
| **ν†µμ‹  λ°©ν–¥** | λ‹¨λ°©ν–¥ (ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„) | μ–‘λ°©ν–¥ (ν΄λΌμ΄μ–ΈνΈ β†” μ„λ²„) |
| **μ‹¤μ‹κ°„μ„±** | ν΄λ§μ΄λ‚ λ΅± ν΄λ§μΌλ΅ μ‹¤μ‹κ°„ κµ¬ν„ κ°€λ¥ | μ‹¤μ‹κ°„ ν†µμ‹ μ— λ§¤μ° μ ν•© |
| **μ¤λ²„ν—¤λ“** | κ° μ”μ²­μ— ν—¤λ” ν¬ν•¨ | ν•Έλ“μ…°μ΄ν¬ μ΄ν›„ ν—¤λ” μ¤λ²„ν—¤λ“ μ—†μ |
| **ν™μ© μ‚¬λ΅€** | μ •μ  μ½ν…μΈ  μ κ³µ, μ”μ²­ κΈ°λ° λ°μ΄ν„° | μ‹¤μ‹κ°„ μ±„ν…, μ•λ¦Ό, κ²μ„, IoT λ“± |

**WebSocket**μ€ HTTPμ λ‹¨λ°©ν–¥μ„± ν•κ³„λ¥Ό κ·Ήλ³µν•κ³ , μ‹¤μ‹κ°„μΌλ΅ μ–‘λ°©ν–¥ μ†ν†µμ΄ ν•„μ”ν• μƒν™©μ—μ„ λ›°μ–΄λ‚ ν¨μ¨μ„±κ³Ό μ„±λ¥μ„ μ κ³µν•©λ‹λ‹¤. λ°λ©΄ HTTPλ” κ°„λ‹¨ν• μ”μ²­-μ‘λ‹µμ΄ ν•„μ”ν• μ›Ή μ½ν…μΈ  μ κ³µμ— λ” μ ν•©ν• ν”„λ΅ν† μ½μ…λ‹λ‹¤.

<br/>

## Ws WebSocket

`ws`λ” Node.jsμ—μ„ μμν• WebSocket ν”„λ΅ν† μ½μ„ κµ¬ν„ν•κΈ° μ„ν• κ°€μ¥ κΈ°λ³Έμ μΈ λΌμ΄λΈλ¬λ¦¬μ…λ‹λ‹¤. λ§¤μ° κ²½λ‰μ΄λ©°, WebSocket ν‘μ¤€μ„ μ§μ ‘ μ‚¬μ©ν•©λ‹λ‹¤. λ¶ν•„μ”ν• λ¶€κ°€ κΈ°λ¥ μ—†μ΄ κ°„λ‹¨ν• μ‹¤μ‹κ°„ ν†µμ‹ μ„ κµ¬ν„ν•κ³ μ ν•  λ• μ ν•©ν•©λ‹λ‹¤.

<br/>

### **μ£Όμ” κ°μ²΄ λ° λ©”μ„λ“**

**`WebSocket.Server`μ λ©”μ„λ“μ™€ μ΄λ²¤νΈ**

**μ£Όμ” κ°μ²΄**

- **WebSocket.Server (`WebSocket.Server`)**: μ„λ²„λ¥Ό μƒμ„±ν•κΈ° μ„ν• κ°μ²΄μ…λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈμ™€μ μ—°κ²°μ„ κ΄€λ¦¬ν•λ©°, μ—¬λ¬ μ΄λ²¤νΈ λ¦¬μ¤λ„λ¥Ό μ„¤μ •ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ™€μ μ†ν†µμ„ μ§€μ›ν•©λ‹λ‹¤.
- **WebSocket (`WebSocket`)**: μ„λ²„ λλ” ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ WebSocket μ—°κ²°μ„ λ‚νƒ€λ‚΄λ” κ°μ²΄μ…λ‹λ‹¤. κ° ν΄λΌμ΄μ–ΈνΈμ™€μ μ—°κ²°μ„ μ΄ κ°μ²΄λ¥Ό ν†µν•΄ μ²λ¦¬ν•©λ‹λ‹¤.

**`WebSocket.Server`μ λ©”μ„λ“μ™€ μ΄λ²¤νΈ**

- **`new WebSocket.Server(options)`**: WebSocket μ„λ²„λ¥Ό μƒμ„±ν•λ” μƒμ„±μμ…λ‹λ‹¤. μ—¬κΈ°μ„ `options` κ°μ²΄λ¥Ό ν†µν•΄ ν¬νΈ λ²νΈμ™€ κ°™μ€ μ„¤μ •μ„ ν•  μ μμµλ‹λ‹¤.
    
    ```jsx
    const server = new WebSocket.Server({ port: 8080 });
    ```
    
- **`server.on(event, callback)`**: νΉμ • μ΄λ²¤νΈκ°€ λ°μƒν–μ„ λ• μ‹¤ν–‰ν•  μ½λ°± ν•¨μλ¥Ό μ„¤μ •ν•©λ‹λ‹¤.
    - eventλ” μ•„λμ™€ κ°™μ΄ κµ¬μ„±λ©λ‹λ‹¤:
    - **`connection`**: ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°λ  λ• λ°μƒν•©λ‹λ‹¤. μ½λ°± ν•¨μλ” μ—°κ²°λ WebSocket κ°μ²΄λ¥Ό μΈμλ΅ λ°›μµλ‹λ‹¤.
    
    ```jsx
    server.on('connection', (socket) => {
      console.log('μƒ ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°λμ—μµλ‹λ‹¤.);
    });
    
    ```
    
    - **`close`**: μ„λ²„κ°€ μΆ…λ£λκ±°λ‚ μ—°κ²°μ΄ μΆ…λ£λ  λ• λ°μƒν•©λ‹λ‹¤.
    
    ```jsx
    server.on('close', () => {
      console.log('μ„λ²„κ°€ μΆ…λ£λμ—μµλ‹λ‹¤.');
    });
    ```
    
    - **`error`**: μ„λ²„μ—μ„ μ¤λ¥κ°€ λ°μƒν–μ„ λ• νΈμ¶λ©λ‹λ‹¤.
    
    ```jsx
    server.on('error', (error) => {
      console.log(`μ—λ¬κ°€ λ°μƒν–μµλ‹λ‹¤: ${error.message}`);
    });
    ```

<br/>

- **`socket.send(data)`**: μ„λ²„ λλ” ν΄λΌμ΄μ–ΈνΈκ°€ μƒλ€λ°©μ—κ² λ°μ΄ν„°λ¥Ό μ „μ†΅ν•©λ‹λ‹¤. `data`λ” λ¬Έμμ—΄ λλ” λ°”μ΄λ„λ¦¬ ν•μ‹μΌ μ μμµλ‹λ‹¤.
    
    ```jsx
    socket.send('μ•λ…•ν•μ„Έμ”, ν΄λΌμ΄μ–ΈνΈ!');
    ```
    
- **`socket.on(event, callback)`**: νΉμ • μ΄λ²¤νΈμ— λ€ν•΄ μ½λ°±μ„ μ„¤μ •ν•©λ‹λ‹¤.
    - eventλ” μ•„λμ™€ κ°™μ΄ κµ¬μ„±λ©λ‹λ‹¤:
    - **`message`**: μƒλ€λ°©μΌλ΅λ¶€ν„° λ©”μ‹μ§€λ¥Ό λ°›μ„ λ• λ°μƒν•©λ‹λ‹¤. μ½λ°± ν•¨μλ” μμ‹ λ λ©”μ‹μ§€λ¥Ό μΈμλ΅ λ°›μµλ‹λ‹¤.
    
    ```jsx
    socket.on('message', (message) => {
      console.log(`λ°›μ€ λ©”μ‹μ§€: ${message}`);
    });
    ```
    
    - **`close`**: μ—°κ²°μ΄ λ‹«ν λ• λ°μƒν•©λ‹λ‹¤.
    
    ```jsx
    socket.on('close', () => {
      console.log('μ—°κ²°μ΄ λ‹«ν”μµλ‹λ‹¤.');
    });
    ```
    
    - **`error`**: μ—°κ²° μ¤‘ μ¤λ¥κ°€ λ°μƒν•  λ• νΈμ¶λ©λ‹λ‹¤.
    
    ```jsx
    socket.on('error', (error) => {
      console.log(`μ—λ¬κ°€ λ°μƒν–μµλ‹λ‹¤: ${error.message}`);
    });
    ```
    
- **`socket.close()`**: WebSocket μ—°κ²°μ„ λ‹«μµλ‹λ‹¤. μ—°κ²°μ΄ λ‹«νλ©΄ `close` μ΄λ²¤νΈκ°€ λ°μƒν•©λ‹λ‹¤.

`WebSocket` κ°μ²΄λ” `addEventListener` λ©”μ„λ“λ¥Ό ν†µν•΄ λ‹¤μ–‘ν• μ΄λ²¤νΈμ— λ¦¬μ¤λ„λ¥Ό μ¶”κ°€ν•  μ μμµλ‹λ‹¤. μ΄ λ°©μ‹μ€ μ΄λ²¤νΈ λ¦¬μ¤λ„λ¥Ό μ„¤μ •ν•λ” λ λ‹¤λ¥Έ λ°©λ²•μΌλ΅, μ΄λ²¤νΈ κΈ°λ° ν†µμ‹ μ—μ„ μμ£Ό μ‚¬μ©λ©λ‹λ‹¤. `onmessage`, `onopen`, `onclose` λ“± μ†μ„±μ„ μ„¤μ •ν•λ” λ°©λ²•κ³Ό λΉ„μ·ν•μ§€λ§, μ΄ λ°©μ‹μ€ μ΄λ²¤νΈ λ¦¬μ¤λ„λ¥Ό μ—¬λ¬ κ° μ¶”κ°€ν•  μ μλ‹¤λ” μ¥μ μ΄ μμµλ‹λ‹¤.

**μ£Όμ” μ΄λ²¤νΈ**

- **`open`**: WebSocket μ—°κ²°μ΄ μ„±κ³µμ μΌλ΅ μ—΄λ Έμ„ λ• λ°μƒν•λ” μ΄λ²¤νΈμ…λ‹λ‹¤.
- **`message`**: μ„λ²„λ΅λ¶€ν„° λ©”μ‹μ§€κ°€ λ„μ°©ν–μ„ λ• λ°μƒν•λ” μ΄λ²¤νΈμ…λ‹λ‹¤.
- **`close`**: WebSocket μ—°κ²°μ΄ λ‹«ν”μ„ λ• λ°μƒν•λ” μ΄λ²¤νΈμ…λ‹λ‹¤.
- **`error`**: WebSocket μ—°κ²°μ—μ„ μ¤λ¥κ°€ λ°μƒν–μ„ λ• λ°μƒν•λ” μ΄λ²¤νΈμ…λ‹λ‹¤.

```jsx
// WebSocket μ„λ²„μ— μ—°κ²°
const socket = new WebSocket('ws://localhost:3000');

// 'open' μ΄λ²¤νΈ λ¦¬μ¤λ„ μ¶”κ°€
socket.addEventListener('open', (event) => {
  console.log('WebSocket μ—°κ²°μ΄ μ—΄λ Έμµλ‹λ‹¤.');
  socket.send('μ„λ²„μ— λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.');
});

// 'message' μ΄λ²¤νΈ λ¦¬μ¤λ„ μ¶”κ°€
socket.addEventListener('message', (event) => {
  console.log(`μ„λ²„λ΅λ¶€ν„° λ°›μ€ λ©”μ‹μ§€: ${event.data}`);
});

// 'close' μ΄λ²¤νΈ λ¦¬μ¤λ„ μ¶”κ°€
socket.addEventListener('close', (event) => {
  console.log('WebSocket μ—°κ²°μ΄ μΆ…λ£λμ—μµλ‹λ‹¤.');
});

// 'error' μ΄λ²¤νΈ λ¦¬μ¤λ„ μ¶”κ°€
socket.addEventListener('error', (event) => {
  console.error('WebSocket μ¤λ¥ λ°μƒ:', event);
});
```

<br/>

### Ws WebSocket μ‚¬μ©ν•κΈ°

`ws` λ¨λ“μ„ μ‚¬μ©ν•μ—¬ κ°„λ‹¨ν• μ±„ν…μ„ κµ¬ν„ν• μμ‹μ…λ‹λ‹¤.

**μ„λ²„μ—  `ws` λ¨λ“ μ„¤μΉν•κΈ°**

```bash
npm install ws
```

**μ„λ²„ μ½”λ“**

```jsx
// backend/server.js
const WebSocket = require("ws");

// ν¬νΈ 3000λ²μ—μ„ WebSocket μ„λ²„λ¥Ό μ‹¤ν–‰
const server = new WebSocket.Server({ port: 3000 });

// backend/server.js
server.on("connection", (ws) => {
  console.log("ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°λμ—μµλ‹λ‹¤.");

  // ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ©”μ‹μ§€λ¥Ό λ°›μ•μ„ λ•
  ws.on("message", (message) => {
    console.log(`ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°›μ€ λ©”μ‹μ§€: ${message}`);

    // μ—°κ²°λ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ‹μ§€λ¥Ό λΈλ΅λ“μΊμ¤νΈ
    server.clients.forEach((client) => {
      if (client.readyState === WebSocket.OPEN) {
        client.send(message.toString()); // λ©”μ‹μ§€λ¥Ό λ¬Έμμ—΄λ΅ μ „μ†΅
      }
    });
  });

  // μ—°κ²°μ΄ μΆ…λ£λμ—μ„ λ•
  ws.on("close", () => {
    console.log("ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°μ„ μΆ…λ£ν–μµλ‹λ‹¤.");
  });

  // ν΄λΌμ΄μ–ΈνΈμ—κ² μ΄κΈ° λ©”μ‹μ§€ μ „μ†΅
  ws.send("μ›Ήμ†μΌ“ μ„λ²„μ— μ—°κ²°λμ—μµλ‹λ‹¤.");
});

```

<br/>

**ν΄λΌμ΄μ–ΈνΈ μ½”λ“**

```jsx
<!-- frontend/index.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Socket.IO</title>
</head>
<body>
  <h1>Socket.IO</h1>
  <div id="chat">
    <div id="messages"></div>
    <input id="messageInput" type="text" placeholder="λ©”μ‹μ§€λ¥Ό μ…λ ¥ν•μ„Έμ”" />
    <button id="sendButton">μ „μ†΅</button>
  </div>

  <script>
    // μ„λ²„μ™€ μ—°κ²°
    const socket = io('http://localhost:3000');

    socket.on('connect', () => {
      console.log('μ„λ²„μ— μ—°κ²°λμ—μµλ‹λ‹¤.');
    });

    // λ©”μ‹μ§€ μ „μ†΅ λ²„νΌ ν΄λ¦­ μ‹ λ©”μ‹μ§€λ¥Ό μ„λ²„λ΅ λ³΄λƒ„
    document.getElementById('sendButton').addEventListener('click', () => {
      const messageInput = document.getElementById('messageInput');
      const message = messageInput.value;

      if (message.trim() !== '') {
        socket.emit('chat message', message); // μ„λ²„λ΅ λ©”μ‹μ§€ μ „μ†΅
        messageInput.value = ''; // λ©”μ‹μ§€ μ…λ ¥ ν•„λ“ μ΄κΈ°ν™”
      }
    });

    // μ„λ²„λ΅λ¶€ν„° λ°›μ€ λ©”μ‹μ§€λ¥Ό ν™”λ©΄μ— ν‘μ‹
    socket.on('chat message', (message) => {
      const messagesDiv = document.getElementById('messages');
      const messageElement = document.createElement('div');
      messageElement.textContent = message;
      messagesDiv.appendChild(messageElement);
    });

    socket.on('disconnect', () => {
      console.log('μ„λ²„μ™€μ μ—°κ²°μ΄ μΆ…λ£λμ—μµλ‹λ‹¤.');
    });
  </script>
</body>
</html>
```

<br/>

## Socket.io

**Web Socket**μ€ HTML5μ κΈ°μ μ΄κΈ° λ•λ¬Έμ—μ¤λλ λ²„μ „μ μ›Ή λΈλΌμ°μ €λ” Web Socketμ„ μ§€μ›ν•μ§€ μ•μµλ‹λ‹¤. νΉν μλ™ μ—…λ°μ΄νΈκ°€ λμ§€ μ•λ” μµμ¤ν”λ΅λ¬ κµ¬ λ²„μ „ μ‚¬μ©μλ“¤μ€ Web SocketμΌλ΅ μ‘μ„±λ μ›Ήνμ΄μ§€λ¥Ό λ³Ό μ μ—†μµλ‹λ‹¤. λ”°λΌμ„ μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ λ‚μ¨ μ—¬λ¬ κΈ°μ  μ¤‘ ν•λ‚κ°€ `Socket.io` μ…λ‹λ‹¤.**μ›Ήνμ΄μ§€κ°€ μ—΄λ¦¬λ” λΈλΌμ°μ €κ°€ μ›Ήμ†μΌ“μ„ μ§€μ›ν•λ©΄ μ›Ήμ†μΌ“ λ°©μ‹μΌλ΅ λ™μ‘ν•κ³ ,μ§€μ›ν•μ§€ μ•λ” λΈλΌμ°μ €λΌλ©΄ μΌλ° httpλ¥Ό μ΄μ©ν•΄μ„ μ‹¤μ‹κ°„ ν†µμ‹ μ„ ν‰λ‚΄λ‚΄λ” κ²ƒ**μ…λ‹λ‹¤.

`Socket.io`λ” μλ°”μ¤ν¬λ¦½νΈλ¥Ό μ΄μ©ν•μ—¬ λΈλΌμ°μ € μΆ…λ¥μ— μƒκ΄€μ—†μ΄ μ‹¤μ‹κ°„ μ›Ήμ„ κµ¬ν„ν•  μ μλ„λ΅ ν• κΈ°μ μ…λ‹λ‹¤. WebSocketλΏλ§ μ•„λ‹λΌ ν΄λ°± λ©”μ»¤λ‹μ¦μ„ μ‚¬μ©ν•μ—¬ λ‹¤μ–‘ν• μ‹¤μ‹κ°„ ν†µμ‹  λ°©μ‹(μ: HTTP ν΄λ§)μ„ μ§€μ›ν•©λ‹λ‹¤. WebSocket ν”„λ΅ν† μ½μ„ μ΄μ©ν•μ§€λ§, μ¶”κ°€μ μΈ κΈ°λ¥(λΈλ΅λ“μΊμ¤ν…, λ£Έ, μλ™ μ¬μ—°κ²° λ“±)μ„ μ κ³µν•μ—¬ μ‹¤μ‹κ°„ ν†µμ‹ μ„ κµ¬ν„ν•λ” λ° λ” μ μ—°ν• ν™κ²½μ„ μ κ³µν•©λ‹λ‹¤.

<br/>

### **μ£Όμ” κ°μ²΄ λ° λ©”μ„λ“**

**μ£Όμ” κ°μ²΄**

- **`Server` (`io`)**: Socket.IO μ„λ²„ κ°μ²΄λ΅, μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈμ™€μ μ—°κ²°μ„ κ΄€λ¦¬ν•©λ‹λ‹¤.
- **`Socket` (`socket`)**: κ°λ³„ ν΄λΌμ΄μ–ΈνΈμ™€μ μ—°κ²°μ„ λ‚νƒ€λ‚΄λ” κ°μ²΄λ΅, ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ ν†µμ‹ μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤.

<br/>

**`Server` κ°μ²΄μ λ©”μ„λ“μ™€ μ΄λ²¤νΈ**

- **`require('socket.io')(port, options)`**: μ„λ²„λ¥Ό μƒμ„±ν•λ©°, μ£Όμ–΄μ§„ ν¬νΈμ—μ„ μ‹¤ν–‰ν•©λ‹λ‹¤.
    
    ```jsx
    const io = require('socket.io')(3000);
    ```
    
- **`io.on(event, callback)` :** μ΄λ²¤νΈ λ¦¬μ¤λ„λ¥Ό μ„¤μ •ν•©λ‹λ‹¤.
    - **`connection`**: μƒλ΅μ΄ ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°λμ—μ„ λ• νΈμ¶λ©λ‹λ‹¤. μ½λ°± ν•¨μλ” μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ `socket` κ°μ²΄λ¥Ό μΈμλ΅ λ°›μµλ‹λ‹¤.
    
    ```jsx
    io.on('connection', (socket) => {
      console.log('μƒ ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°λμ—μµλ‹λ‹¤.');
    });
    ```
    
- **`io.emit(event, data)`**: μ—°κ²°λ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² μ΄λ²¤νΈμ™€ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.
    
    ```jsx
    io.emit('broadcast', 'λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ‹μ§€λ¥Ό λ³΄λƒ…λ‹λ‹¤.');
    ```

<br/>

**`Socket` κ°μ²΄μ λ©”μ„λ“μ™€ μ΄λ²¤νΈ**

- **`socket.on(event, callback)`**: νΉμ • μ΄λ²¤νΈμ— λ€ν•΄ μ½λ°±μ„ μ„¤μ •ν•©λ‹λ‹¤.
    - **`message`**: κΈ°λ³Έ μ΄λ²¤νΈλ΅, ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— λ°μ΄ν„°λ¥Ό μ „μ†΅ν•  λ• νΈμ¶λ©λ‹λ‹¤.
        
        ```jsx
        socket.on('message', (data) => {
          console.log(`ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°›μ€ λ©”μ‹μ§€: ${data}`);
        });
        ```
        
    - **μ»¤μ¤ν…€ μ΄λ²¤νΈ**: μ‚¬μ©μ μ •μ μ΄λ²¤νΈλ¥Ό μ„¤μ •ν•κ³  λ°μ΄ν„° ν†µμ‹ μ— μ‚¬μ©ν•  μ μμµλ‹λ‹¤.
        
        ```jsx
        socket.on('chat message', (msg) => {
          console.log(`λ°›μ€ μ±„ν… λ©”μ‹μ§€: ${msg}`);
        });
        ```
        
- **`socket.emit(event, data)`**: ν„μ¬ μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ—κ² μ΄λ²¤νΈμ™€ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.
    
    ```jsx
    socket.emit('response', 'μ„λ²„λ΅λ¶€ν„° μ‘λ‹µ λ©”μ‹μ§€');
    ```
    
- **`socket.broadcast.emit(event, data)`**: ν„μ¬ μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ μ™Έν• λ‚λ¨Έμ§€ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² μ΄λ²¤νΈμ™€ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.
    
    ```jsx
    socket.broadcast.emit('new user', 'μƒ μ‚¬μ©μκ°€ μ ‘μ†ν•μ€μµλ‹λ‹¤.');
    ```
    
<br/>

### λ„¤μ„μ¤νμ΄μ¤μ™€ λ£Έ

- **λ„¤μ„μ¤νμ΄μ¤** (`io.of(namespace)`): λ„¤μ„μ¤νμ΄μ¤λ” μ„λ΅ λ‹¤λ¥Έ λ©μ μ ν†µμ‹  μ±„λ„μ„ λ¶„λ¦¬ν•κΈ° μ„ν•΄ μ‚¬μ©ν•©λ‹λ‹¤.
    
    ```jsx
    const chat = io.of('/chat');
    chat.on('connection', (socket) => {
      console.log('μ±„ν… λ„¤μ„μ¤νμ΄μ¤μ— μ—°κ²°λμ—μµλ‹λ‹¤.');
    });
    ```
    
- **λ£Έ(Room)**: `socket.join(room)`κ³Ό κ°™μ€ λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬ μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈλ¥Ό κ·Έλ£Ήν™”ν•©λ‹λ‹¤.
    
    ```jsx
    socket.join('room1');
    io.to('room1').emit('message', 'λ£Έ1μ— μλ” λ¨λ“  μ‚¬μ©μμ—κ² λ©”μ‹μ§€ μ „μ†΅');
    ```
    

<br/>

### Socket.io μ‚¬μ©ν•κΈ°

`Socket.IO` λ¨λ“μ„ μ‚¬μ©ν•μ—¬ κ°„λ‹¨ν• μ±„ν…μ„ κµ¬ν„ν• μμ‹μ…λ‹λ‹¤.

`Socket.IO`λ” μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ λ¨λ‘ μ„¤μΉκ°€ ν•„μ”ν•©λ‹λ‹¤.

```bash
npm install socket.io socket.io-client
```

**μ„λ²„ μ½”λ“**

```jsx
// backend/server.js
const io = require('socket.io')(3000, {
  cors: {
    origin: "*", // λ¨λ“  λ„λ©”μΈμ—μ„ μ ‘κ·Ό ν—μ© (κ°λ°μ©μΌλ΅λ§ μ‚¬μ©)
    methods: ["GET", "POST"]
  }
});

io.on('connection', (socket) => {
  console.log('ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°λμ—μµλ‹λ‹¤.');

  // ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μ±„ν… λ©”μ‹μ§€λ¥Ό λ°›μ•μ„ λ•
  socket.on('chat message', (message) => {
    console.log(`ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°›μ€ λ©”μ‹μ§€: ${message}`);

    // μ—°κ²°λ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ‹μ§€λ¥Ό λΈλ΅λ“μΊμ¤νΈ
    io.emit('chat message', message);
  });

  // μ—°κ²°μ΄ μΆ…λ£λ  λ•
  socket.on('disconnect', () => {
    console.log('ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°μ„ μΆ…λ£ν–μµλ‹λ‹¤.');
  });
});

```

<br/>

**ν΄λΌμ΄μ–ΈνΈ μ½”λ“**

```jsx
<!-- frontend/index.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Socket.IO</title>
  <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
</head>
<body>
  <h1>Socket.IO</h1>
  <div id="chat">
    <div id="messages"></div>
    <input id="messageInput" type="text" placeholder="λ©”μ‹μ§€λ¥Ό μ…λ ¥ν•μ„Έμ”" />
    <button id="sendButton">μ „μ†΅</button>
  </div>

  <script>
    // μ„λ²„μ™€ μ—°κ²°
    const socket = io('http://localhost:3000');

    socket.on('connect', () => {
      console.log('μ„λ²„μ— μ—°κ²°λμ—μµλ‹λ‹¤.');
    });

    // λ©”μ‹μ§€ μ „μ†΅ λ²„νΌ ν΄λ¦­ μ‹ λ©”μ‹μ§€λ¥Ό μ„λ²„λ΅ λ³΄λƒ„
    document.getElementById('sendButton').addEventListener('click', () => {
      const messageInput = document.getElementById('messageInput');
      const message = messageInput.value;

      if (message.trim() !== '') {
        socket.emit('chat message', message); // μ„λ²„λ΅ λ©”μ‹μ§€ μ „μ†΅
        messageInput.value = ''; // λ©”μ‹μ§€ μ…λ ¥ ν•„λ“ μ΄κΈ°ν™”
      }
    });

    // μ„λ²„λ΅λ¶€ν„° λ°›μ€ λ©”μ‹μ§€λ¥Ό ν™”λ©΄μ— ν‘μ‹
    socket.on('chat message', (message) => {
      const messagesDiv = document.getElementById('messages');
      const messageElement = document.createElement('div');
      messageElement.textContent = message;
      messagesDiv.appendChild(messageElement);
    });

    socket.on('disconnect', () => {
      console.log('μ„λ²„μ™€μ μ—°κ²°μ΄ μΆ…λ£λμ—μµλ‹λ‹¤.');
    });
  </script>
</body>
</html>

```

<br/>

## Ws vs Socket.io

`ws`μ™€ `Socket.IO`λ” λ¨λ‘ Node.jsμ—μ„ WebSocket ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μ‹¤μ‹κ°„ ν†µμ‹ μ„ κµ¬ν„ν•λ” λΌμ΄λΈλ¬λ¦¬μ…λ‹λ‹¤. κ·Έλ¬λ‚ μ΄ λ‘μ€ κΈ°λ¥μ , κµ¬μ΅°μ , μ‚¬μ© νΈμμ„± μΈ΅λ©΄μ—μ„ μ°¨μ΄κ°€ μμµλ‹λ‹¤. 

<br/>

### 1 ) ν”„λ΅ν† μ½ μ§€μ› λ°©μ‹

**`ws`**

- `ws`λ” μμν• **WebSocket ν”„λ΅ν† μ½**λ§μ„ κµ¬ν„ν•λ” κ²½λ‰ λΌμ΄λΈλ¬λ¦¬μ…λ‹λ‹¤. WebSocket ν”„λ΅ν† μ½λ§μ„ μ‚¬μ©ν•κΈ° λ•λ¬Έμ— μ§μ ‘ WebSocket μ—°κ²°μ„ κ΄€λ¦¬ν•΄μ•Ό ν•©λ‹λ‹¤.
- **λΈλΌμ°μ €κ°€ WebSocketμ„ μ§€μ›**ν•μ§€ μ•λ” κ²½μ° λ‹¤λ¥Έ λ€μ²΄ ν†µμ‹  λ°©μ‹(ν΄λ§ λ“±)μ„ μ‚¬μ©ν•  μ μ—†μΌλ―€λ΅, λ¨λ“  μ‚¬μ©μκ°€ WebSocketμ„ μ§€μ›ν•λ” ν™κ²½μ—μ„ μ ‘μ†ν•΄μ•Ό ν•©λ‹λ‹¤.

**`Socket.IO`**

- `Socket.IO`λ” **WebSocketμ„ ν¬ν•¨ν• λ‹¤μ–‘ν• μ‹¤μ‹κ°„ ν†µμ‹  λ°©λ²•**μ„ μλ™μΌλ΅ μ§€μ›ν•©λ‹λ‹¤. WebSocketμ„ κΈ°λ³ΈμΌλ΅ μ‚¬μ©ν•μ§€λ§, ν΄λΌμ΄μ–ΈνΈκ°€ WebSocketμ„ μ§€μ›ν•μ§€ μ•λ” κ²½μ° μλ™μΌλ΅ HTTP ν΄λ§ λ“±μ λ°©λ²•μΌλ΅ ν΄λ°±(fallback)ν•  μ μμµλ‹λ‹¤.
- λ”°λΌμ„, λ” λ§μ€ μ‚¬μ©μλ¥Ό λ€μƒμΌλ΅ λ†’μ€ νΈν™μ„±μ„ λ³΄μ¥ν•©λ‹λ‹¤. μ΄ λ•λ¬Έμ— WebSocketμ„ μ§€μ›ν•μ§€ μ•λ” μ¤λλ λΈλΌμ°μ €λ‚ λ„¤νΈμ›ν¬ μ μ•½μ΄ μλ” ν™κ²½μ—μ„λ„ λ™μ‘ν•  μ μμµλ‹λ‹¤.

<br/>

### 2 ) κΈ°λ¥κ³Ό λ¶€κ°€ κΈ°λ¥

**`ws`**

- `ws`λ” **μμν• WebSocket μ—°κ²°λ§μ„ μ κ³µ**ν•κΈ° λ•λ¬Έμ— λ§¤μ° κ²½λ‰μ΄κ³ , μµμ†ν•μ κΈ°λ¥λ§ ν¬ν•¨λμ–΄ μμµλ‹λ‹¤.
- κΈ°λ³Έμ μΈ λ©”μ‹μ§€ μ „μ†΅κ³Ό μμ‹  κΈ°λ¥λ§ μ κ³µν•λ©°, μλ™ μ¬μ—°κ²°μ΄λ‚ λ„¤μ„μ¤νμ΄μ¤ κ°™μ€ κ³ κΈ‰ κΈ°λ¥μ€ μ§μ ‘ κµ¬ν„ν•΄μ•Ό ν•©λ‹λ‹¤.

**`Socket.IO`**

- `Socket.IO`λ” λ‹¤μ–‘ν• **λ¶€κ°€ κΈ°λ¥**μ„ μ κ³µν•©λ‹λ‹¤
    - **μλ™ μ¬μ—°κ²°**: μ—°κ²°μ΄ λμ–΄μ§ κ²½μ° ν΄λΌμ΄μ–ΈνΈλ” μλ™μΌλ΅ μ¬μ—°κ²°μ„ μ‹λ„ν•©λ‹λ‹¤.
    - **μ΄λ²¤νΈ κΈ°λ° ν†µμ‹ **: λ‹¨μν• λ©”μ‹μ§€λΏλ§ μ•„λ‹λΌ μ΄λ²¤νΈλ¥Ό μ΄λ¦„μΌλ΅ μ •μν•κ³  κ·Έμ— λ”°λΌ μ²λ¦¬ν•  μ μμµλ‹λ‹¤.
    - **λ„¤μ„μ¤νμ΄μ¤(Namespaces)**: κ°™μ€ μ„λ²„μ—μ„ μ—¬λ¬ κ°μ λ³„λ„ ν†µμ‹  μ±„λ„μ„ μ κ³µν•  μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, νΉμ • μ£Όμ μ— λ€ν• μ—°κ²°μ„ κµ¬λ¶„ν•  μ μμµλ‹λ‹¤.
    - **λ£Έ(Rooms)**: μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈλ¥Ό κ·Έλ£Ήν™”ν•μ—¬ ν• λ²μ— νΉμ • κ·Έλ£Ήμ— λ©”μ‹μ§€λ¥Ό λ³΄λ‚Ό μ μμµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ λΈλ΅λ“μΊμ¤νΈμ™€ λ©€ν‹°μΊμ¤νΈκ°€ κ°€λ¥ν•©λ‹λ‹¤.
- μ΄λ¬ν• λ¶€κ°€ κΈ°λ¥ λ•λ¶„μ— `Socket.IO`λ” μ±„ν… μ• ν”λ¦¬μΌ€μ΄μ…μ΄λ‚ κ²μ„κ³Ό κ°™μ€ λ³µμ΅ν• μ‹¤μ‹κ°„ μ• ν”λ¦¬μΌ€μ΄μ…μ„ κµ¬ν„ν•  λ• λ§¤μ° μ μ©ν•©λ‹λ‹¤.

<br/>

### 3 ) μ„¤μ • λ° μ‚¬μ© νΈμμ„±

**`ws`**

- `ws`λ” WebSocket ν‘μ¤€μ— λ§¤μ° μ¶©μ‹¤ν•μ—¬ **κ°„λ‹¨ν•κ³  κ²½λ‰**μ…λ‹λ‹¤. λ”°λΌμ„ μ„¤μ •κ³Ό μ‚¬μ©μ΄ λΉ„κµμ  κ°„λ‹¨ν•λ©°, μ΄κΈ°μ— WebSocket ν”„λ΅ν† μ½μ„ μ μ΄ν•΄ν•κ³  μλ” κ°λ°μλΌλ©΄ μ‚¬μ©ν•κΈ° μμ›”ν•©λ‹λ‹¤.
- λ‹¤λ§, κ³ κΈ‰ κΈ°λ¥(μλ™ μ¬μ—°κ²°, λ£Έ λ“±)μ„ κµ¬ν„ν•  λ•λ” κ°λ°μκ°€ μ§μ ‘ λ¨λ“  λ΅μ§μ„ μ‘μ„±ν•΄μ•Ό ν•κΈ° λ•λ¬Έμ— μ¶”κ°€μ μΈ λ…Έλ ¥μ΄ ν•„μ”ν•©λ‹λ‹¤.

**`Socket.IO`**

- `Socket.IO`λ” **μ„¤μ •μ΄ λ‹¤μ† λ³µμ΅**ν•  μ μμ§€λ§, λ‹¤μ–‘ν• κΈ°λ¥μ„ μ†μ‰½κ² ν™μ©ν•  μ μλ” μ¥μ μ΄ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, μ„λ²„μ—μ„ μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ—°κ²°ν•κ³  νΉμ • κ·Έλ£Ήμ—λ§ λ©”μ‹μ§€λ¥Ό λ³΄λ‚Ό λ• λ³„λ„μ λ³µμ΅ν• μ„¤μ • μ—†μ΄λ„ λ£Έ κΈ°λ¥μ„ μ‚¬μ©ν•λ©΄ μ‰½κ² κµ¬ν„ν•  μ μμµλ‹λ‹¤.
- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ λ„¤νΈμ›ν¬ μƒνƒ λ³€ν™”μ—λ„ μλ™μΌλ΅ λ€μ‘ν•  μ μλ” κΈ°λ¥λ“¤μ„ κΈ°λ³Έ μ κ³µν•κΈ° λ•λ¬Έμ— μ‚¬μ© νΈμμ„±μ΄ λ†’μµλ‹λ‹¤.

<br/>

### 4 ) λΈλΌμ°μ € νΈν™μ„±κ³Ό ν΄λ°± λ©”μ»¤λ‹μ¦

**`ws`**

- λΈλΌμ°μ €μ WebSocket APIλ¥Ό μ§μ ‘ μ‚¬μ©ν•©λ‹λ‹¤. λ”°λΌμ„, WebSocketμ„ μ§€μ›ν•μ§€ μ•λ” μ¤λλ λΈλΌμ°μ €λ‚ ν”„λ΅μ‹ μ„λ²„λ¥Ό ν†µν•΄ μ ‘μ†ν•λ” κ²½μ°μ—λ” μ λ€λ΅ λ™μ‘ν•μ§€ μ•μ„ μ μμµλ‹λ‹¤.

**`Socket.IO`**

- WebSocketμ„ μ§€μ›ν•μ§€ μ•λ” ν™κ²½μ—μ„λ„ μλ™μΌλ΅ **HTTP ν΄λ§(HTTP long-polling)** λ“±μ ν΄λ°± λ©”μ»¤λ‹μ¦μ„ μ‚¬μ©ν•΄ μ—°κ²°μ„ μ μ§€ν•©λ‹λ‹¤. λ”°λΌμ„ λ‹¤μ–‘ν• ν™κ²½μ—μ„ λ™μ‘μ΄ λ³΄μ¥λ©λ‹λ‹¤.
- μ΄λ¬ν• ν΄λ°± κΈ°λ¥ λ•λ¶„μ— λ„¤νΈμ›ν¬ ν™κ²½μ΄ λ¶μ•μ •ν•κ±°λ‚ λΈλΌμ°μ € νΈν™μ„±μ΄ μ¤‘μ”ν• ν”„λ΅μ νΈμ—μ„ νΉν μ λ¦¬ν•©λ‹λ‹¤.

<br/>

### 5 ) λ°μ΄ν„° μ „μ†΅ λ°©μ‹ λ° μ¤λ²„ν—¤λ“

**`ws`**

- `ws`λ” WebSocket ν‘μ¤€μ— λ”°λ¥Έ **ν”„λ μ„ λ‹¨μ„μ μ „μ†΅**μ„ μ‚¬μ©ν•λ©°, λ°μ΄ν„° μ¤λ²„ν—¤λ“κ°€ κ±°μ μ—†μµλ‹λ‹¤. λ§¤μ° κ²½λ‰ν™”λ ν”„λ μ„μ„ μ‚¬μ©ν•΄ λ„¤νΈμ›ν¬ λ¶€ν•λ¥Ό μ¤„μΌ μ μμµλ‹λ‹¤.
- μµμ†ν•μ ν—¤λ”λ¥Ό μ‚¬μ©ν•λ―€λ΅ λ€μ—­ν­ μ‚¬μ©λ‰μ΄ μ κ³ , κ³ μ„±λ¥μ„ μ”κµ¬ν•λ” μ‹¤μ‹κ°„ μ• ν”λ¦¬μΌ€μ΄μ…μ— μ ν•©ν•©λ‹λ‹¤.

**`Socket.IO`**

- `Socket.IO`λ” λ‹¤μ–‘ν• κΈ°λ¥μ„ μ κ³µν•λ” λ§νΌ, κ° λ°μ΄ν„° μ „μ†΅μ— **μ¶”κ°€μ μΈ ν”„λ΅ν† μ½ μ¤λ²„ν—¤λ“**κ°€ λ°μƒν•©λ‹λ‹¤. μ΄λ²¤νΈμ μ΄λ¦„μ΄λ‚ λ°μ΄ν„° κµ¬μ΅° κ΄€λ¦¬ λ“±μ λ¶€κ°€μ μΈ λ°μ΄ν„°λ¥Ό ν¬ν•¨ν•΄ μ „μ†΅ν•κΈ° λ•λ¬Έμ— κΈ°λ³Έ `ws` λΌμ΄λΈλ¬λ¦¬μ— λΉ„ν•΄ μ¤λ²„ν—¤λ“κ°€ ν½λ‹λ‹¤.
- μ΄λ¬ν• μ¤λ²„ν—¤λ“λ” λ‹¤μμ ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν•λ” λ€κ·λ¨ μ„λΉ„μ¤μ—μ„λ” μ„±λ¥μ— μν–¥μ„ μ¤„ μ μμ§€λ§, μΌλ°μ μΈ μƒν™©μ—μ„λ” ν° λ¬Έμ κ°€ λμ§€ μ•μµλ‹λ‹¤.

<br/>

| **νΉμ„±** | `ws` | `Socket.IO` |
| --- | --- | --- |
| **ν”„λ΅ν† μ½** | WebSocketλ§ μ§€μ› | WebSocket + ν΄λ°± λ©”μ»¤λ‹μ¦ (HTTP ν΄λ§ λ“±) |
| **κΈ°λ¥** | κΈ°λ³Έμ μΈ WebSocket κΈ°λ¥ μ κ³µ | μ΄λ²¤νΈ κΈ°λ° ν†µμ‹ , μλ™ μ¬μ—°κ²°, λ£Έ, λ„¤μ„μ¤νμ΄μ¤ λ“± |
| **μ„¤μ • νΈμμ„±** | κ°„λ‹¨ν•κ³  κ²½λ‰ | μ„¤μ •μ΄ λ‹¤μ† λ³µμ΅ν•λ‚ λ‹¤μ–‘ν• κΈ°λ¥ μ§€μ› |
| **νΈν™μ„±** | λΈλΌμ°μ €μ—μ„ WebSocketλ§ μ‚¬μ© κ°€λ¥ | ν΄λ°± κΈ°λ¥μ„ ν†µν•΄ νΈν™μ„± λ†’μ |
| **μ¤λ²„ν—¤λ“** | μµμ†ν•μ λ°μ΄ν„° μ¤λ²„ν—¤λ“ | λ¶€κ°€μ μΈ λ°μ΄ν„° μ¤λ²„ν—¤λ“ λ°μƒ |
| **μ‚¬μ© μμ‹** | κ°„λ‹¨ν• μ‹¤μ‹κ°„ λ°μ΄ν„° μ „μ†΅ | μ±„ν…, κ²μ„ λ“± λ³µμ΅ν• μ‹¤μ‹κ°„ μ• ν”λ¦¬μΌ€μ΄μ… |

`ws`λ” λ‹¨μν•κ³  κ°€λ²Όμ΄ μ‹¤μ‹κ°„ μ• ν”λ¦¬μΌ€μ΄μ…μ— μ ν•©ν•κ³ , `Socket.IO`λ” λ” λ³µμ΅ν• κΈ°λ¥μ„ μ†μ‰½κ² κµ¬ν„ν•  μ μμ–΄ λ‹¤μ–‘ν• μ”κµ¬μ‚¬ν•­μ„ κ°€μ§„ μ‹¤μ‹κ°„ μ‹μ¤ν…μ—μ„ μ λ¦¬ν•©λ‹λ‹¤.